var s={},t;function c(){if(t)return s;t=1,importScripts("./comlink.min.js","./worker-wasm/index.js");const{Client:o}=wasm_bindgen;Comlink.transferHandlers.set("function",{canHandle:e=>!1,deserialize(e){return Comlink.transferHandlers.get("proxy").deserialize(e)}}),Comlink.transferHandlers.set("plain",{canHandle:e=>!1,deserialize(e){return e}});let a=!1;async function l(e){if(a)throw new Error("Already initialized");a=!0,console.log("Initializing client WASM worker"),await wasm_bindgen("./worker-wasm/index_bg.wasm");const r=await o.create(e);Comlink.expose(r)}return self.addEventListener("message",async e=>{const r=e.data;if(r==="NIMIQ_CHECKREADY"){self.postMessage("NIMIQ_READY");return}if(r.type!=="NIMIQ_INIT")return;let n=r.config;(!n||typeof n!="object")&&(n={});try{await l(n),self.postMessage({ok:!0})}catch(i){self.postMessage({ok:!1,error:i.message,stack:i.stack})}}),console.debug("Client WASM worker ready"),s}c();
